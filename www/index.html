<html>
    <head>
        <meta charset="UTF-8">
        <link rel="stylesheet" href="css/jquery.mobile-1.4.5.min.css">
        <link rel="stylesheet" href="css/jquery.mobile.theme-1.4.5.min.css">
        <link rel="stylesheet" href="css/jquery.mobile.structure-1.4.5.min.css">
        <script type="text/javascript" src="js/libs/jquery-2.1.4.min.js"></script>
        <script type="text/javascript" src="js/libs/jquery.mobile-1.4.5.min.js"></script>
        <script type="text/javascript" src="js/libs/knockout-3.4.0.js"></script>
        <script type="text/javascript" src="js/index.js"></script>
        <script type="text/javascript">
        /* Initial Process */
        $(document).ready(function() {
            /* Bind to ViewModel */
            ko.applyBindings(ViewModel);
        });

        function editRow(element) {
            var row = element.id;
            var data = ViewModel.items()[row];
            ViewModel.inputStartTime(data.startTime);
            ViewModel.inputLocation(data.location);
            ViewModel.inputArrivalTime(data.arrivalTime);
        }
        </script>
    </head>
    <body>
    <div data-role="page">
        <div data-role="header">
            <h1>Page Title</h1>
            <a href="#" class="ui-btn-right ui-btn ui-btn-inline ui-mini ui-corner-all ui-btn-icon-right ui-icon-gear">Archive</a>
        </div>
        <div align="center">
            <a href="#popupRegist" data-rel="popup" data-position-to="window" class="ui-btn ui-corner-all ui-shadow ui-btn-inline ui-icon-star ui-btn-icon-left ui-btn-a" data-transition="pop">記録</a><br>
        </div>
        <table data-role="table" id="table-column-toggle" data-mode="columntoggle" class="ui-responsive table-stroke">
            <thead>
                <tr>
                    <th data-priority="1">出発</th>
                    <th data-priority="1">経路</th>
                    <th data-priority="1">到着</th>
                    <th data-priority="1">編集</th>
                </tr>
            </thead>
            <tbody data-bind="foreach: items">
                <tr>
                    <th data-bind="text: startTime"></th>
                    <td data-bind="text: location"></td>
                    <td data-bind="text: arrivalTime"></td>
                    <td onClick="editRow(this);" data-bind="attr: {id: $index}"><a href="#popupRegist" data-rel="popup" data-position-to="window" data-transition="pop">編集</a></td>
                </tr>
            </tbody>
        </table>
        <div data-role="popup" id="popupRegist" data-theme="a" class="ui-corner-all">
            <div style="padding:10px 20px;">
                <h3>Let's Record!</h3>
                <label for="sTime" class="ui-hidden-accessible">出発時間:</label>
                <input type="text" name="startTime" id="sTime" value="" placeholder="出発時間" data-theme="a" data-bind="value: inputStartTime">
                <label for="location" class="ui-hidden-accessible">経路:</label>
                <input type="text" name="location" id="location" value="" placeholder="経路" data-theme="a" data-bind="value: inputLocation">
                <label for="aTime" class="ui-hidden-accessible">到着時間:</label>
                <input type="text" name="arrivalTime" id="aTime" value="" placeholder="到着時間" data-theme="a" data-bind="value: inputArrivalTime">
                <button type="submit" class="ui-btn ui-corner-all ui-shadow ui-btn-b ui-btn-icon-left ui-icon-check">登録</button>
            </div>
        </div>
    </div>
    </body>
</html>
